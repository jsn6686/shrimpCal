<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shrimp Cal</title>
<link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@300;400;500;600;700&family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg-deep:       #0a1628;
    --border:        #1e4a7a;
    --border-active: #2d9cdb;
    --accent:        #f4720b;
    --accent2:       #2d9cdb;
    --text-main:     #cde8f7;
    --text-muted:    #5a8ab0;
    --text-dim:      #3a6a90;
  }

  html, body {
    min-height: 100%;
    background: var(--bg-deep);
    font-family: 'Exo 2', sans-serif;
    color: var(--text-main);
    overflow-x: hidden;
  }

  /* Grid background */
  body::before {
    content: ''; position: fixed; inset: 0;
    background-image:
      linear-gradient(rgba(45,156,219,0.04) 1px, transparent 1px),
      linear-gradient(90deg, rgba(45,156,219,0.04) 1px, transparent 1px);
    background-size: 40px 40px;
    pointer-events: none; z-index: 0;
  }
  body::after {
    content: ''; position: fixed; inset: 0;
    background: radial-gradient(ellipse 80% 60% at 50% 0%, transparent 0%, rgba(10,22,40,0.7) 100%);
    pointer-events: none; z-index: 0;
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SCREENS
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .screen {
    position: relative; z-index: 1;
    min-height: 100vh; display: none;
    flex-direction: column; align-items: center;
    padding: 36px 16px 80px;
  }
  .screen.active { display: flex; }
  .screen.slide-in   { animation: slideIn   0.35s ease forwards; }
  .screen.slide-back { animation: slideBack 0.35s ease forwards; }

  @keyframes slideIn   { from { opacity:0; transform:translateX(40px);  } to { opacity:1; transform:translateX(0); } }
  @keyframes slideBack { from { opacity:0; transform:translateX(-40px); } to { opacity:1; transform:translateX(0); } }
  @keyframes fadeUp    { from { opacity:0; transform:translateY(18px);  } to { opacity:1; transform:translateY(0); } }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SHARED COMPONENTS
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

  /* Topbar */
  .topbar {
    width:100%; max-width:860px;
    display:flex; justify-content:flex-end;
    margin-bottom:24px; gap:8px;
    opacity:0; animation:fadeUp 0.5s ease 0.1s forwards;
  }
  .topbar-btn {
    padding:6px 18px; border-radius:6px;
    font-family:'Exo 2',sans-serif; font-size:13px;
    font-weight:600; letter-spacing:0.04em;
    cursor:pointer; border:none; transition:all 0.2s;
  }
  .topbar-btn.ghost { background:transparent; border:1px solid var(--border); color:var(--text-muted); }
  .topbar-btn.ghost:hover { border-color:var(--border-active); color:var(--text-main); }
  .topbar-btn.primary { background:var(--accent); color:#fff; }
  .topbar-btn.primary:hover { filter:brightness(1.15); }

  /* Logo */
  .logo-wrap {
    display:flex; flex-direction:column; align-items:center; gap:10px;
    margin-bottom:40px; opacity:0;
    animation:fadeUp 0.6s ease 0.2s forwards;
  }
  .logo-icon {
    width:64px; height:64px;
    background:rgba(13,31,60,0.85);
    border:1px solid var(--border); border-radius:14px;
    display:flex; align-items:center; justify-content:center;
    box-shadow:0 0 24px rgba(244,114,11,0.2);
    font-size:30px; position:relative; overflow:hidden;
  }
  .logo-icon::after {
    content:''; position:absolute; inset:0;
    background:linear-gradient(135deg, rgba(244,114,11,0.08) 0%, transparent 60%);
  }
  .logo-title {
    font-family:'Orbitron',sans-serif; font-size:38px; font-weight:700;
    color:var(--accent2); letter-spacing:0.02em;
    text-shadow:0 0 30px rgba(45,156,219,0.4);
  }
  .logo-by {
    font-size:11px; font-weight:600; letter-spacing:0.2em;
    text-transform:uppercase; color:var(--text-dim);
  }

  /* Card */
  .card {
    width:100%; max-width:830px;
    background:linear-gradient(145deg, rgba(15,39,68,0.9) 0%, rgba(10,22,40,0.95) 100%);
    border:1px solid var(--border); border-radius:20px;
    padding:48px 44px 56px; backdrop-filter:blur(12px);
    box-shadow:0 0 0 1px rgba(45,156,219,0.06), 0 24px 80px rgba(0,0,0,0.5), inset 0 1px 0 rgba(45,156,219,0.08);
    opacity:0; animation:fadeUp 0.7s ease 0.35s forwards;
  }

  /* Back button */
  .back-btn {
    display:inline-flex; align-items:center; gap:7px;
    background:transparent; border:1px solid var(--border);
    color:var(--text-muted); font-family:'Exo 2',sans-serif;
    font-size:13px; font-weight:600; letter-spacing:0.06em;
    padding:7px 16px; border-radius:8px;
    cursor:pointer; transition:all 0.2s;
    margin-bottom:28px;
  }
  .back-btn:hover { border-color:var(--border-active); color:var(--text-main); }

  /* Section label */
  .section-label {
    font-size:11px; font-weight:700; letter-spacing:0.18em;
    text-transform:uppercase; color:var(--accent2); margin-bottom:14px;
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PAGE 2 â€” TOOL SELECTION
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .page-title {
    text-align:center; font-size:22px; font-weight:300;
    letter-spacing:0.1em; color:var(--text-muted); margin-bottom:40px;
  }

  .tool-list { display:flex; flex-direction:column; gap:20px; }
  .tool-btn {
    width:100%;
    background:linear-gradient(155deg, rgba(15,39,68,0.6) 0%, rgba(10,22,40,0.8) 100%);
    border:1px solid var(--border); border-radius:14px; padding:30px 40px;
    display:flex; align-items:center; justify-content:center; gap:14px;
    cursor:pointer; transition:all 0.25s ease; position:relative; overflow:hidden;
    font-family:'Exo 2',sans-serif; font-size:22px; font-weight:400;
    color:var(--text-main); letter-spacing:0.04em;
  }
  .tool-btn::before {
    content:''; position:absolute; inset:0;
    background:linear-gradient(135deg, rgba(45,156,219,0.07) 0%, transparent 60%);
    opacity:0; transition:opacity 0.25s;
  }
  .tool-btn:hover { border-color:var(--border-active); transform:translateY(-3px); box-shadow:0 12px 40px rgba(45,156,219,0.15), 0 0 0 1px rgba(45,156,219,0.2); color:#fff; }
  .tool-btn:hover::before { opacity:1; }
  .tool-btn:active { transform:translateY(-1px); }
  .tool-btn::after {
    content:''; position:absolute; top:-50%; left:-60%; width:40%; height:200%;
    background:linear-gradient(90deg, transparent, rgba(255,255,255,0.04), transparent);
    transform:skewX(-15deg); transition:left 0.5s ease; pointer-events:none;
  }
  .tool-btn:hover::after { left:120%; }
  .tool-icon { font-size:22px; opacity:0.75; }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PAGE 3 â€” FEED CHART
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

  /* Page header */
  .fc-header {
    text-align:center; margin-bottom:36px;
  }
  .fc-title {
    font-family:'Orbitron',sans-serif; font-size:34px; font-weight:700;
    color:var(--accent2); letter-spacing:0.02em;
    text-shadow:0 0 30px rgba(45,156,219,0.4); margin-bottom:7px;
  }
  .fc-subtitle {
    font-size:11px; font-weight:600; letter-spacing:0.22em;
    text-transform:uppercase; color:var(--text-dim);
  }

  /* Setup block */
  .setup-block {
    background:rgba(10,22,40,0.5);
    border:1px solid var(--border); border-radius:14px;
    padding:24px 26px; margin-bottom:20px;
  }

  /* Species toggle */
  .species-toggle { display:grid; grid-template-columns:1fr 1fr; gap:14px; }
  .species-btn {
    background:linear-gradient(155deg, rgba(15,39,68,0.5) 0%, rgba(10,22,40,0.7) 100%);
    border:1.5px solid var(--border); border-radius:12px;
    padding:20px 16px; cursor:pointer; transition:all 0.22s;
    text-align:center; font-family:'Exo 2',sans-serif;
    color:var(--text-main); position:relative; overflow:hidden;
  }
  .species-btn:hover { border-color:var(--border-active); transform:translateY(-2px); }
  .species-btn.active {
    border-color:var(--border-active);
    background:linear-gradient(155deg, rgba(20,55,90,0.7) 0%, rgba(13,31,60,0.9) 100%);
    box-shadow:0 0 0 2px rgba(45,156,219,0.25), 0 8px 28px rgba(45,156,219,0.15);
  }
  .species-emoji { font-size:28px; display:block; margin-bottom:10px; filter:drop-shadow(0 0 6px rgba(244,114,11,0.45)); }
  .species-name  { font-size:14px; font-weight:700; display:block; margin-bottom:4px; }
  .species-latin { font-size:11px; font-style:italic; color:var(--text-dim); display:block; }

  /* PL Input */
  .input-row { display:flex; gap:12px; align-items:flex-end; }
  .input-group { flex:1; }
  .input-group label {
    display:block; font-size:12px; font-weight:600;
    color:var(--text-muted); letter-spacing:0.04em; margin-bottom:9px;
  }
  .pl-input {
    width:100%;
    background:rgba(10,22,40,0.7);
    border:1.5px solid var(--border); border-radius:10px;
    padding:14px 18px;
    font-family:'Exo 2',sans-serif; font-size:16px; font-weight:400;
    color:var(--text-main); outline:none;
    transition:border-color 0.25s, box-shadow 0.25s;
    caret-color:var(--accent2);
  }
  .pl-input::placeholder { color:var(--text-dim); }
  .pl-input:focus { border-color:var(--border-active); box-shadow:0 0 0 3px rgba(45,156,219,0.12); }
  .pl-input.error { border-color:rgba(255,90,90,0.7) !important; }

  .gen-btn {
    padding:14px 28px; white-space:nowrap;
    background:var(--accent2); border:none; border-radius:10px;
    font-family:'Exo 2',sans-serif; font-size:14px; font-weight:700;
    letter-spacing:0.06em; color:#fff; cursor:pointer;
    transition:all 0.2s; box-shadow:0 4px 18px rgba(45,156,219,0.3);
    position:relative; overflow:hidden;
  }
  .gen-btn:hover { filter:brightness(1.1); transform:translateY(-2px); box-shadow:0 8px 28px rgba(45,156,219,0.45); }
  .gen-btn:active { transform:translateY(0); }
  .gen-btn::after {
    content:''; position:absolute; top:-50%; left:-60%; width:40%; height:200%;
    background:linear-gradient(90deg, transparent, rgba(255,255,255,0.15), transparent);
    transform:skewX(-15deg); transition:left 0.5s; pointer-events:none;
  }
  .gen-btn:hover::after { left:120%; }

  /* â”€â”€ Results â”€â”€ */
  .results {
    margin-top:28px;
    opacity:0; transform:translateY(14px);
    transition:opacity 0.45s ease, transform 0.45s ease;
    display:none;
  }
  .results.visible { display:block; opacity:1; transform:translateY(0); }

  @keyframes fadeUp2 {
    from { opacity:0; transform:translateY(20px); }
    to   { opacity:1; transform:translateY(0); }
  }

  .results-header {
    display:flex; justify-content:space-between; align-items:flex-start;
    flex-wrap:wrap; gap:12px; margin-bottom:20px;
  }
  .results-label {
    font-size:10px; font-weight:700; letter-spacing:0.2em;
    text-transform:uppercase; color:var(--text-dim); margin-bottom:5px;
  }
  .results-title {
    font-family:'Exo 2',sans-serif; font-weight:700; font-size:22px;
    color:var(--text-main); letter-spacing:0.01em;
  }
  .results-meta {
    background:rgba(45,156,219,0.1); border:1px solid rgba(45,156,219,0.3);
    border-radius:20px; padding:6px 16px; align-self:center;
    font-size:13px; font-weight:700; color:var(--accent2); letter-spacing:0.06em;
    white-space:nowrap;
  }

  /* Stats */
  .stats-row { display:grid; grid-template-columns:repeat(3,1fr); gap:12px; margin-bottom:22px; }
  .stat-card {
    background:rgba(10,22,40,0.5); border:1px solid var(--border);
    border-radius:12px; padding:16px 14px; text-align:center;
  }
  .stat-value {
    font-family:'Orbitron',sans-serif; font-size:21px; font-weight:700;
    color:var(--text-main); display:block; line-height:1.1;
  }
  .stat-label {
    font-size:10px; font-weight:600; letter-spacing:0.14em;
    text-transform:uppercase; color:var(--text-dim); margin-top:5px; display:block;
  }

  /* Phase legend */
  .legend { display:flex; gap:20px; margin-bottom:14px; flex-wrap:wrap; }
  .legend-item { display:flex; align-items:center; gap:6px; font-size:12px; font-weight:500; color:var(--text-muted); }
  .legend-dot  { width:9px; height:9px; border-radius:50%; flex-shrink:0; }

  /* Table */
  .table-wrap {
    background:linear-gradient(145deg, rgba(15,39,68,0.5) 0%, rgba(10,22,40,0.7) 100%);
    border:1px solid var(--border); border-radius:14px;
    overflow:hidden; overflow-x:auto; margin-bottom:20px;
  }
  table { width:100%; border-collapse:collapse; font-size:13.5px; min-width:400px; }
  thead tr { background:rgba(45,156,219,0.1); border-bottom:1px solid var(--border); }
  thead th {
    padding:12px 16px; text-align:left;
    font-family:'Exo 2',sans-serif; font-size:10px; font-weight:700;
    letter-spacing:0.14em; text-transform:uppercase; color:var(--accent2); white-space:nowrap;
  }
  thead th:not(:first-child) { text-align:center; }
  tbody tr { border-top:1px solid rgba(30,74,122,0.3); transition:background 0.15s; }
  tbody tr:hover { background:rgba(45,156,219,0.05); }
  tbody tr:last-child { border-bottom:none; }
  td { padding:11px 16px; color:var(--text-main); font-size:13px; text-align:center; }
  td:first-child { font-family:'Exo 2',sans-serif; font-weight:700; font-size:15px; text-align:left; width:60px; }

  /* Phase left-border accent */
  .phase-1 td:first-child { color:#2d9cdb; border-left:2px solid #2d9cdb; }
  .phase-2 td:first-child { color:#f4720b; border-left:2px solid #f4720b; }
  .phase-3 td:first-child { color:#27ae60; border-left:2px solid #27ae60; }

  td.feed-day  { font-weight:600; color:#fff; }
  td.cumul     { font-weight:500; color:var(--text-muted); font-size:12.5px; }

  .feed-code { display:inline-flex; gap:5px; flex-wrap:wrap; }
  .code-tag {
    background:rgba(45,156,219,0.12); border:1px solid rgba(45,156,219,0.28);
    border-radius:5px; padding:2px 8px;
    font-family:'Exo 2',sans-serif; font-size:11px; font-weight:700;
    color:var(--accent2); white-space:nowrap; letter-spacing:0.03em;
  }

  /* Export bar */
  .action-row { display:flex; gap:12px; flex-wrap:wrap; }
  .export-btn {
    flex:1; min-width:130px; padding:13px 20px; border-radius:10px;
    font-family:'Exo 2',sans-serif; font-size:13px; font-weight:700;
    letter-spacing:0.05em; cursor:pointer; transition:all 0.2s;
    display:flex; align-items:center; justify-content:center; gap:8px;
  }
  .export-btn.primary  { background:var(--accent); border:none; color:#fff; box-shadow:0 4px 16px rgba(244,114,11,0.3); }
  .export-btn.primary:hover  { filter:brightness(1.1); transform:translateY(-2px); }
  .export-btn.secondary{ background:transparent; border:1.5px solid var(--border); color:var(--text-muted); }
  .export-btn.secondary:hover { border-color:var(--border-active); color:var(--text-main); transform:translateY(-2px); }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PAGE 4 â€” SURVIVAL CALCULATOR
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .sc-header {
    text-align:center; margin-bottom:36px;
  }
  .sc-title {
    font-family:'Orbitron',sans-serif; font-size:34px; font-weight:700;
    color:var(--accent2); letter-spacing:0.02em;
    text-shadow:0 0 30px rgba(45,156,219,0.4); margin-bottom:7px;
  }
  .sc-subtitle {
    font-size:11px; font-weight:600; letter-spacing:0.22em;
    text-transform:uppercase; color:var(--text-dim);
  }

  .sc-results {
    margin-top:28px;
    opacity:0; transform:translateY(14px);
    transition:opacity 0.45s ease, transform 0.45s ease;
    display:none;
  }
  .sc-results.visible { display:block; opacity:1; transform:translateY(0); }

  .sc-stats-row { display:grid; grid-template-columns:repeat(2,1fr); gap:12px; margin-top:8px; }
  .sc-stat-card {
    background:rgba(10,22,40,0.5); border:1px solid var(--border);
    border-radius:12px; padding:18px 14px; text-align:center;
  }
  .sc-stat-value {
    font-family:'Orbitron',sans-serif; font-size:22px; font-weight:700;
    color:var(--text-main); display:block; line-height:1.1;
  }
  .sc-stat-label {
    font-size:10px; font-weight:600; letter-spacing:0.14em;
    text-transform:uppercase; color:var(--text-dim); margin-top:5px; display:block;
  }
  .sc-stat-card.highlight .sc-stat-value { color:var(--accent); }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PRINT
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  @media print {
    body { background:#fff; color:#000; }
    body::before, body::after { display:none; }
    .topbar, .back-btn, .setup-block, .action-row { display:none !important; }
    .screen { padding:20px; }
    .card { box-shadow:none; border:none; background:#fff; animation:none; opacity:1; }
    .results { display:block !important; opacity:1; transform:none; }
    thead th { color:#004 !important; background:#e8f4fb !important; }
    td { color:#111 !important; }
    .code-tag { background:#e6f4ff; color:#005; border-color:#99c; }
    .stat-card { background:#f0f8ff; border-color:#99c; }
    .stat-value { color:#0077b6; }
    .stat-label, .cumul { color:#555; }
    .results-title { color:#003; }
    .results-meta { background:#e6f4ff; color:#0077b6; border-color:#99c; }
    .table-wrap { border-color:#ccc; }
    .legend-item { color:#333; }
    .fc-title, .fc-subtitle { color:#003; }
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     RESPONSIVE
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  @media (max-width:540px) {
    .logo-title { font-size:28px; }
    .card { padding:32px 18px 40px; }
    .tool-btn { font-size:18px; padding:24px; }
    .fc-title { font-size:26px; }
    .species-toggle { grid-template-columns:1fr; }
    .input-row { flex-direction:column; }
    .gen-btn { width:100%; }
    .stats-row { grid-template-columns:1fr; }
    .action-row { flex-direction:column; }
  }
</style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PAGE 2 â€” Tool Selection
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="screen2" class="screen active">
  <div class="topbar">
    <button class="topbar-btn ghost">Login</button>
    <button class="topbar-btn primary">Sign Up</button>
  </div>
  <div class="logo-wrap">
    <div class="logo-icon">ğŸ¦</div>
    <div class="logo-title">Shrimp Cal</div>
    <div class="logo-by">by Janusan Sivaraja</div>
  </div>
  <div class="card">
    <div class="page-title">Select Tool</div>
    <div class="tool-list">
      <button class="tool-btn" onclick="goToTool('feed-chart')">
        <span class="tool-icon">ğŸ“Š</span> Feed Chart
      </button>
      <button class="tool-btn" onclick="goToTool('survival-calculator')">
        <span class="tool-icon">ğŸ§®</span> Survival Calculator
      </button>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PAGE 3 â€” Feed Chart
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="screen3" class="screen">
  <div class="topbar">
    <button class="topbar-btn ghost">Login</button>
    <button class="topbar-btn primary">Sign Up</button>
  </div>

  <div class="logo-wrap" style="margin-bottom:18px;">
    <div class="logo-icon">ğŸ¦</div>
  </div>

  <div class="card" style="max-width:700px;">
    <button class="back-btn" onclick="navigate(2,3)">â† Back</button>

    <div class="fc-header">
      <div class="fc-title">Shrimp Feed Chart</div>
      <div class="fc-subtitle">Post Larvae Feeding Schedule Generator</div>
    </div>

    <!-- Step 01 â€” Species -->
    <div class="setup-block">
      <p class="section-label">01 â€” Select Species</p>
      <div class="species-toggle">
        <button class="species-btn active" id="btn_monodon" onclick="selectSpecies('monodon', this)">
          <span class="species-emoji">ğŸ¦</span>
          <span class="species-name">Black Tiger Shrimp</span>
          <span class="species-latin">Penaeus monodon</span>
        </button>
        <button class="species-btn" id="btn_vannamei" onclick="selectSpecies('vannamei', this)">
          <span class="species-emoji">ğŸ¦</span>
          <span class="species-name">Whiteleg Shrimp</span>
          <span class="species-latin">Litopenaeus vannamei</span>
        </button>
      </div>
    </div>

    <!-- Step 02 â€” PL Count -->
    <div class="setup-block">
      <p class="section-label">02 â€” Enter Post Larvae Count</p>
      <div class="input-row">
        <div class="input-group">
          <label for="plCount">Number of Post Larvae (PL)</label>
          <input
            type="number" id="plCount" class="pl-input"
            placeholder="e.g. 250000" min="1" step="1000"
            onkeydown="if(event.key==='Enter') generateChart()"
            oninput="this.classList.remove('error')"
          />
        </div>
        <button class="gen-btn" onclick="generateChart()">Generate Chart â†’</button>
      </div>
    </div>

    <!-- Results -->
    <div class="results" id="results">

      <div class="results-header">
        <div>
          <p class="results-label">Feed Schedule</p>
          <h2 class="results-title" id="resultsTitle">â€”</h2>
        </div>
        <span class="results-meta" id="resultsMeta">â€”</span>
      </div>

      <div class="stats-row">
        <div class="stat-card">
          <span class="stat-value" id="statTotal">â€”</span>
          <span class="stat-label">Total Feed (kg)</span>
        </div>
        <div class="stat-card">
          <span class="stat-value">30</span>
          <span class="stat-label">Days</span>
        </div>
        <div class="stat-card">
          <span class="stat-value" id="statRatio">â€”</span>
          <span class="stat-label">kg per 10K PL</span>
        </div>
      </div>

      <div class="legend">
        <div class="legend-item"><div class="legend-dot" style="background:#2d9cdb"></div>Phase 1: Starter</div>
        <div class="legend-item"><div class="legend-dot" style="background:#f4720b"></div>Phase 2: Transition</div>
        <div class="legend-item"><div class="legend-dot" style="background:#27ae60"></div>Phase 3: Growth</div>
      </div>

      <div class="table-wrap">
        <table id="feedTable">
          <thead>
            <tr>
              <th>DOC</th>
              <th>Feed Code</th>
              <th>Feed/Day (kg)</th>
              <th>Cumulative (kg)</th>
            </tr>
          </thead>
          <tbody id="tableBody"></tbody>
        </table>
      </div>

      <div class="action-row">
        <button class="export-btn primary" onclick="exportPDF()">
          <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14,2 14,8 20,8"/></svg>
          Export PDF
        </button>
        <button class="export-btn secondary" onclick="exportCSV()">
          <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="7,10 12,15 17,10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
          Export CSV
        </button>
        <button class="export-btn secondary" onclick="window.print()">
          <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2"><polyline points="6,9 6,2 18,2 18,9"/><path d="M6 18H4a2 2 0 01-2-2v-5a2 2 0 012-2h16a2 2 0 012 2v5a2 2 0 01-2 2h-2"/><rect x="6" y="14" width="12" height="8"/></svg>
          Print
        </button>
      </div>

    </div><!-- /results -->
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PAGE 4 â€” Survival Calculator
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="screen4" class="screen">
  <div class="topbar">
    <button class="topbar-btn ghost">Login</button>
    <button class="topbar-btn primary">Sign Up</button>
  </div>

  <div class="logo-wrap" style="margin-bottom:18px;">
    <div class="logo-icon">ğŸ¦</div>
  </div>

  <div class="card" style="max-width:700px;">
    <button class="back-btn" onclick="navigate(2,4)">â† Back</button>

    <div class="sc-header">
      <div class="sc-title">Survival Calculator</div>
      <div class="sc-subtitle">Estimate Shrimp Survival Rate</div>
    </div>

    <!-- Step 01 â€” Species -->
    <div class="setup-block">
      <p class="section-label">01 â€” Select Species</p>
      <div class="species-toggle">
        <button class="species-btn active" id="sc_btn_monodon" onclick="selectSurvivalSpecies('monodon', this)">
          <span class="species-emoji">ğŸ¦</span>
          <span class="species-name">Black Tiger Shrimp</span>
          <span class="species-latin">Penaeus monodon</span>
        </button>
        <button class="species-btn" id="sc_btn_vannamei" onclick="selectSurvivalSpecies('vannamei', this)">
          <span class="species-emoji">ğŸ¦</span>
          <span class="species-name">Whiteleg Shrimp</span>
          <span class="species-latin">Litopenaeus vannamei</span>
        </button>
      </div>
    </div>

    <!-- Step 02 â€” Inputs (Vannamei) -->
    <div class="setup-block" id="sc_inputs_vannamei">
      <p class="section-label">02 â€” Enter Values</p>
      <div class="input-row" style="flex-direction:column; gap:16px;">
        <div class="input-group">
          <label for="sc_v_abw">Average Body Weight (ABW) â€” grams (3â€“30g)</label>
          <input type="number" id="sc_v_abw" class="pl-input" placeholder="e.g. 12" min="3" max="30" step="0.1" oninput="this.classList.remove('error')" />
        </div>
        <div class="input-group">
          <label for="sc_v_dailyFeed">Daily Feed Given (kg)</label>
          <input type="number" id="sc_v_dailyFeed" class="pl-input" placeholder="e.g. 45" min="0" step="0.1" oninput="this.classList.remove('error')" />
        </div>
        <div class="input-group">
          <label for="sc_v_stocked">Number of PL Stocked</label>
          <input type="number" id="sc_v_stocked" class="pl-input" placeholder="e.g. 500000" min="1" step="1000" oninput="this.classList.remove('error')" />
        </div>
        <button class="gen-btn" style="width:100%;" onclick="calculateSurvival()">Calculate â†’</button>
      </div>
    </div>

    <!-- Step 02 â€” Inputs (Monodon) -->
    <div class="setup-block" id="sc_inputs_monodon" style="display:none;">
      <p class="section-label">02 â€” Enter Values</p>
      <div class="input-row" style="flex-direction:column; gap:16px;">
        <div class="input-group">
          <label for="sc_m_abw">Average Body Weight (ABW) â€” grams</label>
          <input type="number" id="sc_m_abw" class="pl-input" placeholder="e.g. 20" min="1" step="0.1" oninput="this.classList.remove('error')" />
        </div>
        <div class="input-group">
          <label for="sc_m_feed">Daily Feed Given (kg)</label>
          <input type="number" id="sc_m_feed" class="pl-input" placeholder="e.g. 60" min="0" step="0.1" oninput="this.classList.remove('error')" />
        </div>
        <div class="input-group">
          <label for="sc_m_stocking">Number of PL Stocked</label>
          <input type="number" id="sc_m_stocking" class="pl-input" placeholder="e.g. 300000" min="1" step="1000" oninput="this.classList.remove('error')" />
        </div>
        <button class="gen-btn" style="width:100%;" onclick="calculateSurvival()">Calculate â†’</button>
      </div>
    </div>

    <!-- Results -->
    <div class="sc-results" id="sc_results">
      <div class="results-header">
        <div>
          <p class="results-label">Survival Estimate</p>
          <h2 class="results-title" id="sc_resultsTitle">â€”</h2>
        </div>
        <span class="results-meta" id="sc_resultsMeta">â€”</span>
      </div>
      <div class="sc-stats-row">
        <div class="sc-stat-card">
          <span class="sc-stat-value" id="sc_feedRate">â€”</span>
          <span class="sc-stat-label">Auto Feed Rate (%)</span>
        </div>
        <div class="sc-stat-card">
          <span class="sc-stat-value" id="sc_biomass">â€”</span>
          <span class="sc-stat-label">Estimated Biomass (kg)</span>
        </div>
        <div class="sc-stat-card">
          <span class="sc-stat-value" id="sc_shrimpCount">â€”</span>
          <span class="sc-stat-label">Shrimp Alive (pcs)</span>
        </div>
        <div class="sc-stat-card highlight">
          <span class="sc-stat-value" id="sc_survival">â€”</span>
          <span class="sc-stat-label">Survival Rate (%)</span>
        </div>
      </div>
    </div>

  </div>
</div>

<script>
  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     FEED DATA (per 100,000 PL)
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  const MONODON_BASE = [
    [1,2.0,"No.01"],[2,2.0,"No.01"],[3,2.0,"No.01"],[4,2.3,"No.01"],[5,2.6,"No.01"],
    [6,2.9,"No.01"],[7,3.2,"No.01"],[8,3.5,"No.01"],[9,3.8,"No.01"],[10,4.1,"No.01"],
    [11,4.4,"No.01+No.02"],[12,4.7,"No.01+No.02"],[13,5.0,"No.01+No.02"],[14,5.3,"No.01+No.02"],
    [15,5.6,"No.01+No.02"],[16,5.9,"No.01+No.02"],[17,6.2,"No.01+No.02"],[18,6.5,"No.01+No.02"],
    [19,6.8,"No.01+No.02"],[20,7.1,"No.02"],[21,7.4,"No.02"],[22,7.7,"No.02"],
    [23,8.0,"No.02"],[24,8.3,"No.02"],[25,8.6,"No.02+No.03"],[26,8.9,"No.02+No.03"],
    [27,9.2,"No.02+No.03"],[28,9.5,"No.02+No.03"],[29,9.8,"No.02+No.03"],[30,10.1,"No.02+No.03"]
  ];

  const VANNAMEI_BASE = [
    [1,2.0,"No 01"],[2,2.3,"No 01"],[3,2.6,"No 01"],[4,2.9,"No 01"],[5,3.2,"No 01"],
    [6,3.6,"No 01"],[7,4.0,"No 01"],[8,4.4,"No 01"],[9,4.8,"No 01"],[10,5.2,"No 01"],
    [11,5.7,"No 01+No 2"],[12,6.2,"No 01+No 2"],[13,6.7,"No 01+No 2"],[14,7.2,"No 01+No 2"],
    [15,7.7,"No 01+No 2"],[16,8.3,"No 01+No 2"],[17,8.9,"No 01+No 2"],[18,9.5,"No 01+No 2"],
    [19,10.1,"No 01+No 2"],[20,10.7,"No 01+No 2"],[21,11.4,"No 2"],[22,12.1,"No 2"],
    [23,12.8,"No 2"],[24,13.5,"No 2"],[25,14.2,"No 2"],[26,15.0,"No 2"],
    [27,15.8,"No 2"],[28,16.6,"No 2"],[29,17.4,"No 2"],[30,18.2,"No 2"]
  ];

  let selectedSpecies = 'monodon';

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     NAVIGATION
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  function navigate(to, from) {
    const fromEl = document.getElementById('screen' + from);
    const toEl   = document.getElementById('screen' + to);
    const anim   = to < from ? 'slide-back' : 'slide-in';
    fromEl.classList.remove('active');
    toEl.classList.add('active', anim);
    toEl.addEventListener('animationend', () => toEl.classList.remove(anim), { once: true });
  }

  function goToTool(tool) {
    if (tool === 'feed-chart') {
      // Reset chart page
      const res = document.getElementById('results');
      res.classList.remove('visible');
      res.style.display = 'none';
      document.getElementById('plCount').value = '';
      document.getElementById('plCount').classList.remove('error');
      // Reset species to monodon
      selectSpecies('monodon', document.getElementById('btn_monodon'));
      navigate(3, 2);
    } else if (tool === 'survival-calculator') {
      // Reset survival page
      const scRes = document.getElementById('sc_results');
      scRes.classList.remove('visible');
      scRes.style.display = 'none';
      // Reset inputs
      ['sc_v_abw','sc_v_dailyFeed','sc_v_stocked','sc_m_abw','sc_m_feed','sc_m_stocking'].forEach(id => {
        const el = document.getElementById(id);
        if (el) { el.value = ''; el.classList.remove('error'); }
      });
      // Reset species to monodon
      selectSurvivalSpecies('monodon', document.getElementById('sc_btn_monodon'));
      navigate(4, 2);
    }
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SPECIES TOGGLE
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  function selectSpecies(sp, btn) {
    selectedSpecies = sp;
    document.querySelectorAll('.species-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    // Re-generate if a PL count already entered
    if (document.getElementById('plCount').value) generateChart();
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     HELPERS
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  function getPhase(doc) {
    if (doc <= 10) return 1;
    if (doc <= 24) return 2;
    return 3;
  }

  function formatFeedCode(code) {
    return '<div class="feed-code">' +
      code.split('+').map(c => `<span class="code-tag">${c.trim()}</span>`).join(' <span style="color:var(--text-dim)">+</span> ') +
      '</div>';
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     GENERATE
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  function generateChart() {
    const pl = parseFloat(document.getElementById('plCount').value);
    if (!pl || pl < 1) {
      const inp = document.getElementById('plCount');
      inp.classList.add('error'); inp.focus();
      setTimeout(() => inp.classList.remove('error'), 1500);
      return;
    }

    const ratio    = pl / 100000;
    const BASE     = selectedSpecies === 'monodon' ? MONODON_BASE : VANNAMEI_BASE;
    const specName = selectedSpecies === 'monodon'
      ? 'Black Tiger Shrimp (Monodon)'
      : 'Whiteleg Shrimp (Vannamei)';

    document.getElementById('resultsTitle').textContent = specName;
    document.getElementById('resultsMeta').textContent  = pl.toLocaleString() + ' PL';

    let cumulative = 0;
    const tbody = document.getElementById('tableBody');
    tbody.innerHTML = '';

    BASE.forEach(([doc, feedBase, code]) => {
      const feed = +(feedBase * ratio).toFixed(2);
      cumulative = +(cumulative + feed).toFixed(2);
      const phase = getPhase(doc);
      const tr = document.createElement('tr');
      tr.className = `phase-${phase}`;
      tr.innerHTML = `
        <td>${doc}</td>
        <td>${formatFeedCode(code)}</td>
        <td class="feed-day">${feed.toFixed(2)}</td>
        <td class="cumul">${cumulative.toFixed(2)}</td>
      `;
      tbody.appendChild(tr);
    });

    document.getElementById('statTotal').textContent = cumulative.toFixed(1);
    document.getElementById('statRatio').textContent = (cumulative / (pl / 10000)).toFixed(1);

    const results = document.getElementById('results');
    results.style.display = 'block';
    requestAnimationFrame(() => requestAnimationFrame(() => {
      results.classList.add('visible');
      results.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }));
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     EXPORT
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  function exportCSV() {
    const pl     = document.getElementById('plCount').value;
    const ratio  = pl / 100000;
    const BASE   = selectedSpecies === 'monodon' ? MONODON_BASE : VANNAMEI_BASE;
    const name   = selectedSpecies === 'monodon' ? 'Monodon' : 'Vannamei';

    let csv = `Shrimp Feed Chart - ${name}\nPL Count: ${pl}\n\nDOC,Feed Code,Feed/Day (kg),Cumulative (kg)\n`;
    let cum = 0;
    BASE.forEach(([doc, feedBase, code]) => {
      const feed = +(feedBase * ratio).toFixed(2);
      cum = +(cum + feed).toFixed(2);
      csv += `${doc},"${code}",${feed},${cum}\n`;
    });

    const blob = new Blob([csv], { type:'text/csv' });
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = `feed-chart-${name.toLowerCase()}-${pl}PL.csv`;
    a.click();
  }

  function exportPDF() { window.print(); }

  /* Keyboard */
  document.querySelectorAll('.species-btn').forEach(btn => {
    btn.addEventListener('keydown', e => { if (e.key === 'Enter' || e.key === ' ') btn.click(); });
  });

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SURVIVAL CALCULATOR
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  let selectedSurvivalSpecies = 'monodon';

  function selectSurvivalSpecies(sp, btn) {
    selectedSurvivalSpecies = sp;
    document.querySelectorAll('#screen4 .species-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    // Show/hide correct input panels
    document.getElementById('sc_inputs_vannamei').style.display = sp === 'vannamei' ? 'block' : 'none';
    document.getElementById('sc_inputs_monodon').style.display  = sp === 'monodon'  ? 'block' : 'none';
    // Hide results when switching species
    const scRes = document.getElementById('sc_results');
    scRes.classList.remove('visible');
    scRes.style.display = 'none';
  }

  // Vannamei feed table: weight(g) â†’ feed%
  function getVannameiFeedPercentage(weight) {
    const feedTable = {
      3:5.25,4:5,5:4.75,6:4.5,7:4.25,8:4,9:3.9,10:3.8,
      11:3.7,12:3.6,13:3.5,14:3.4,15:3.3,16:3.2,17:3.1,
      18:3.0,19:2.9,20:2.8,21:2.7,22:2.6,23:2.5,24:2.4,
      25:2.3,26:2.2,27:2.1,28:2.0,29:1.9,30:1.8
    };
    return feedTable[Math.round(weight)];
  }

  // Monodon feeding rate: interpolated 3.1% @ 10g â†’ 1.4% @ 40g
  function getMonodonFeedingRate(weight) {
    const minW = 10, maxW = 40, startRate = 3.1, endRate = 1.4;
    if (weight <= minW) return startRate;
    if (weight >= maxW) return endRate;
    return startRate - ((startRate - endRate) / (maxW - minW)) * (weight - minW);
  }

  function calculateSurvival() {
    const scRes = document.getElementById('sc_results');

    if (selectedSurvivalSpecies === 'vannamei') {
      const abw       = parseFloat(document.getElementById('sc_v_abw').value);
      const dailyFeed = parseFloat(document.getElementById('sc_v_dailyFeed').value);
      const stocked   = parseFloat(document.getElementById('sc_v_stocked').value);

      // Validate
      let valid = true;
      if (isNaN(abw) || abw < 3 || abw > 30) { document.getElementById('sc_v_abw').classList.add('error'); valid = false; }
      if (isNaN(dailyFeed) || dailyFeed <= 0)  { document.getElementById('sc_v_dailyFeed').classList.add('error'); valid = false; }
      if (isNaN(stocked)   || stocked < 1)      { document.getElementById('sc_v_stocked').classList.add('error'); valid = false; }
      if (!valid) return;

      const feedPercent = getVannameiFeedPercentage(abw);
      const biomass     = dailyFeed / (feedPercent / 100);
      const shrimpAlive = (biomass * 1000) / abw;
      const survival    = (shrimpAlive / stocked) * 100;

      document.getElementById('sc_resultsTitle').textContent = 'Whiteleg Shrimp (Vannamei)';
      document.getElementById('sc_resultsMeta').textContent  = 'ABW: ' + abw + 'g';
      document.getElementById('sc_feedRate').textContent     = feedPercent + '%';
      document.getElementById('sc_biomass').textContent      = biomass.toFixed(2);
      document.getElementById('sc_shrimpCount').textContent  = Math.round(shrimpAlive).toLocaleString();
      document.getElementById('sc_survival').textContent     = survival.toFixed(2) + '%';

    } else {
      const abw      = parseFloat(document.getElementById('sc_m_abw').value);
      const feed     = parseFloat(document.getElementById('sc_m_feed').value);
      const stocking = parseFloat(document.getElementById('sc_m_stocking').value);

      let valid = true;
      if (isNaN(abw)      || abw <= 0)      { document.getElementById('sc_m_abw').classList.add('error'); valid = false; }
      if (isNaN(feed)     || feed <= 0)      { document.getElementById('sc_m_feed').classList.add('error'); valid = false; }
      if (isNaN(stocking) || stocking < 1)   { document.getElementById('sc_m_stocking').classList.add('error'); valid = false; }
      if (!valid) return;

      const feedingRate = getMonodonFeedingRate(abw);
      const biomass     = feed / (feedingRate / 100);
      const shrimpCount = biomass / (abw / 1000);
      const survival    = (shrimpCount / stocking) * 100;

      document.getElementById('sc_resultsTitle').textContent = 'Black Tiger Shrimp (Monodon)';
      document.getElementById('sc_resultsMeta').textContent  = 'ABW: ' + abw + 'g';
      document.getElementById('sc_feedRate').textContent     = feedingRate.toFixed(2) + '%';
      document.getElementById('sc_biomass').textContent      = biomass.toFixed(2);
      document.getElementById('sc_shrimpCount').textContent  = Math.round(shrimpCount).toLocaleString();
      document.getElementById('sc_survival').textContent     = survival.toFixed(2) + '%';
    }

    scRes.style.display = 'block';
    requestAnimationFrame(() => requestAnimationFrame(() => {
      scRes.classList.add('visible');
      scRes.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }));
  }
</script>
</body>
</html>